{"version":3,"sources":["./src/app/clients/pages/login/login.component.ts","./src/app/clients/pages/login/login.component.html","./src/app/clients/pages/login/login.module.ts","./src/app/clients/pages/login/login.service.ts"],"names":[],"mappings":"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","file":"src-app-clients-pages-login-login-module.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { LoginService } from './login.service';\r\nimport { AccountModel } from 'src/app/shared/models/account.model';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n  username: string;\r\n  password: string;\r\n  isLoging = false;\r\n  showProgressBar = false;\r\n  constructor(\r\n    private _router: Router,\r\n    private __service: LoginService,\r\n    private __snackbar: MatSnackBar\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    localStorage.removeItem(environment.key_storage.TOKEN.CLIENT);\r\n  }\r\n  ngOnDestroy() {\r\n    this._router.navigate(['index']);\r\n  }\r\n  login() {\r\n    this.showProgressBar = true;\r\n    this.__service\r\n      .login(new AccountModel(this.username, this.password))\r\n      .subscribe(\r\n        (data) => {\r\n          this.showProgressBar = false;\r\n          if (data.Token) {\r\n            localStorage.setItem(\r\n              environment.key_storage.TOKEN.CLIENT,\r\n              data.Token\r\n            );\r\n            localStorage.setItem(\r\n              environment.key_storage.DISPLAY_NAME.CLIENT,\r\n              data.Displayname\r\n            );\r\n\r\n            if (\r\n              data.Role.toString().toUpperCase() != environment.roleIdSinhVien\r\n            ) {\r\n              this.__snackbar.open(\r\n                'Tài khoản của bạn không có quyền truy cập',\r\n                null,\r\n                {\r\n                  duration: 2000,\r\n                }\r\n              );\r\n            } else {\r\n              this.ngOnDestroy();\r\n            }\r\n          } else {\r\n            this.__snackbar.open(data.Message, null, {\r\n              duration: 2000,\r\n            });\r\n          }\r\n        },\r\n        (error) => {\r\n          this.showProgressBar = false;\r\n          this.__snackbar.open('Có lỗi xảy ra', null, {\r\n            duration: 2000,\r\n          });\r\n        }\r\n      );\r\n  }\r\n}\r\n","<mat-progress-bar\r\n  mode=\"indeterminate\"\r\n  [style.display]=\"showProgressBar ? 'block' : 'none'\"\r\n></mat-progress-bar>\r\n<div class=\"main-container\">\r\n  <div class=\"content\">\r\n    <app-home-header></app-home-header>\r\n    <mat-card class=\"example-card\">\r\n      <mat-card-header>\r\n        <mat-card-title>Đăng nhập</mat-card-title>\r\n      </mat-card-header>\r\n      <mat-card-content>\r\n        <form>\r\n          \r\n          <mat-form-field class=\"example-full-width\">\r\n            <input\r\n              matInput\r\n              placeholder=\"Tên đăng nhập\"\r\n              [(ngModel)]=\"username\"\r\n              name=\"username\"\r\n              maxlength=\"100\"\r\n              required\r\n            />\r\n          </mat-form-field>\r\n          <mat-form-field class=\"example-full-width\">\r\n            <input\r\n              matInput\r\n              placeholder=\"Mật khẩu\"\r\n              [(ngModel)]=\"password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              maxlength=\"100\"\r\n              (keyup.enter)=\"login()\"\r\n              required\r\n            />\r\n          </mat-form-field>\r\n          <p>\r\n            Chưa có tài khoản? Đăng ký làm việc phòng thí nghiệm Phân\r\n            tích môi trường <a [routerLink]=\"['../yeu-cau-su-dung-ptn']\">tại đây</a>\r\n          </p>\r\n        </form>\r\n      </mat-card-content>\r\n      <mat-card-actions>\r\n        <button\r\n          mat-raised-button\r\n          [routerLink]=\"['forgot-password']\"\r\n          color=\"primary\"\r\n        >\r\n          Quên mật khẩu\r\n        </button>\r\n        <button mat-raised-button (click)=\"login()\" color=\"primary\">\r\n          Đăng nhập\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { LoginComponent } from './login.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomeHeaderModule } from '../home/home-header/home-header.module';\r\nimport { MatInputModule } from '@angular/material/input';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginComponent,\r\n  },\r\n  {\r\n    path: 'forgot-password',\r\n    loadChildren: () => import('./forgot-password/forgot-password.module').then(m=>m.ForgotPasswordModule),\r\n  },\r\n];\r\n@NgModule({\r\n  declarations: [LoginComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    MatProgressBarModule,\r\n    MatCardModule,\r\n    \r\n    MatFormFieldModule,\r\n    FormsModule,\r\n    MatButtonModule,\r\n    MatButtonModule,\r\n    HomeHeaderModule,\r\n    MatInputModule\r\n  ],\r\n})\r\nexport class LoginModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AccountModel } from 'src/app/shared/models/account.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LoginService {\r\n  constructor(private httpClient: HttpClient) {}\r\n\r\n  login(account: AccountModel): Observable<any> {\r\n    let url = environment.api.url + 'Account/Login';\r\n    return this.httpClient.post(url, account);\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}