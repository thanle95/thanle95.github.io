{"version":3,"sources":["./src/app/admin/pages/main-nav/quan-ly-thong-so-mac-dinh/quan-ly-thong-so-mac-dinh.module.ts","./src/app/admin/pages/main-nav/quan-ly-thong-so-mac-dinh/quan-ly-thong-so-mac-dinh.service.ts","./src/app/admin/pages/main-nav/quan-ly-thong-so-mac-dinh/quan-ly-thong-so-mac-dinh.component.ts","./src/app/admin/pages/main-nav/quan-ly-thong-so-mac-dinh/quan-ly-thong-so-mac-dinh.component.html"],"names":[],"mappings":"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","file":"quan-ly-thong-so-mac-dinh-quan-ly-thong-so-mac-dinh-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\n\r\nimport { QuanLyThongSoMacDinhComponent } from './quan-ly-thong-so-mac-dinh.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatInputModule } from '@angular/material/input';\r\n\r\nconst routes: Routes = [{ path: '', component: QuanLyThongSoMacDinhComponent }];\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes),\r\n    CommonModule,\r\n    MatProgressBarModule,\r\n    MatListModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    FormsModule,\r\n  ],\r\n  declarations: [QuanLyThongSoMacDinhComponent],\r\n})\r\nexport class QuanLyThongSoMacDinhModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../../../../../environments/environment';\r\nimport {  ConstModelRequest } from 'src/app/shared/models/const.model';\r\n\r\n@Injectable({providedIn: 'root'})\r\nexport class QuanLyThongSoMacDinhService {\r\n    constructor(private httpClient: HttpClient) {}\r\n    getAll(): Observable<any> {\r\n      let url = environment.api.url + 'Const/getAll';\r\n      return this.httpClient.get(url);\r\n    }\r\n    update(item: ConstModelRequest): Observable<any> {\r\n      let url = environment.api.url + 'Const/update';\r\n      return this.httpClient.put(url, item);\r\n  }\r\n}","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { Router } from '@angular/router';\nimport {\n  ConstModel,\n  ConstModelRequest,\n} from 'src/app/shared/models/const.model';\nimport { AlertDialogComponent } from 'src/app/shared/pages/alert-dialog/alert-dialog.component';\nimport { environment, eMenuAdmin } from 'src/environments/environment';\nimport { MainAdminComponent } from '../main-nav.component';\nimport { QuanLyThongSoMacDinhService } from './quan-ly-thong-so-mac-dinh.service';\n@Component({\n  selector: 'app-quan-ly-thong-so-mac-dinh',\n  templateUrl: './quan-ly-thong-so-mac-dinh.component.html',\n  styleUrls: ['./quan-ly-thong-so-mac-dinh.component.scss'],\n})\nexport class QuanLyThongSoMacDinhComponent implements OnInit {\n  showProgressBar = true;\n  __constModels: ConstModel[];\n  dataSource: MatTableDataSource<ConstModel>;\n  constructor(\n    private __service: QuanLyThongSoMacDinhService,\n    private dialog: MatDialog,\n    private __snackbar: MatSnackBar,\n    private __router: Router,\n    private __mainComponent: MainAdminComponent\n  ) {\n    localStorage.setItem(\n      environment.key_storage.MENU.ADMIN,\n      eMenuAdmin[eMenuAdmin.QUAN_LY_THONG_SO_MAC_DINH]\n    );\n    this.__mainComponent.__localStorage = localStorage.getItem(\n      environment.key_storage.MENU.ADMIN\n    );\n  }\n  ngOnInit(): void {\n    this.loadData();\n  }\n  showLogin() {\n    this.__router.navigate(['admin/login']);\n  }\n  loadData() {\n    this.showProgressBar = true;\n    this.__service.getAll().subscribe(\n      (data) => {\n        this.showProgressBar = false;\n        if(data.Message){\n          this.__snackbar.open(data.Message, null, {\n            duration: 2000,\n          });\n          return\n        }\n        this.__constModels = data;\n\n        this.dataSource = new MatTableDataSource(this.__constModels);\n      },\n      (error) => {\n        this.showProgressBar = false;\n        this.showLogin();\n        this.__snackbar.open(environment.message.TOKEN_EXPIRED, null, {\n          duration: 2000,\n        });\n      }\n    );\n  }\n  onTextChange(input: string, item: ConstModel) {\n    if (item.Name.toLocaleLowerCase().indexOf('date') > -1) {\n      if (/\\D\\/$/.test(input)) input = input.substr(0, input.length - 3);\n      var values = input.split('-').map(function (v) {\n        return v.replace(/\\D/g, '');\n      });\n      if (values[1]) values[1] = this.checkValue(values[1], 12);\n      if (values[2]) values[2] = this.checkValue(values[2], 31);\n      var output = values.map(function (v, i) {\n        switch (i) {\n          case 0: {\n            return v.length == 4 ? v + '-' : v;\n          }\n          case 1: {\n            return v.length == 2 ? v + '-' : v;\n          }\n          case 2: {\n            return v;\n          }\n        }\n      });\n      item.Value = output.join('');\n    }\n  }\n  checkValue(str: string, max: number) {\n    if (str.charAt(0) !== '0' || str == '00') {\n      var num = parseInt(str);\n      if (isNaN(num) || num <= 0 || num > max) num = 1;\n      str =\n        num > parseInt(max.toString().charAt(0)) && num.toString().length == 1\n          ? '0' + num\n          : num.toString();\n    }\n    return str;\n  }\n  update(item: ConstModel) {\n    if (\n      item.Name.toLocaleLowerCase() ==\n      environment.constant.MaxCancellationPerDay.toLocaleLowerCase()\n    ) {\n      if (Number(item.Value)) {\n      } else {\n        this.__snackbar.open('Vui lòng nhập đúng định dạng', null, {\n          duration: 2000,\n        });\n        return;\n      }\n    }\n\n    const confirmDialogRef = this.dialog.open(AlertDialogComponent, {\n      disableClose: true,\n      width: '17rem',\n      data: {\n        dataKey: `Bạn có chắc chắc muốn cập nhật ${item.Title}: ${item.Value}?`,\n        isConfirm: true,\n      },\n    });\n\n    confirmDialogRef.afterClosed().subscribe((result) => {\n      if (result === true) {\n        this.showProgressBar = true;\n        this.__service.update(item).subscribe(\n          (data) => {\n            this.showProgressBar = false;\n            if (data === 'true') {\n              this.loadData();\n              this.__snackbar.open('Cập nhật thành công', null, {\n                duration: 2000,\n              });\n            } else {\n              this.__snackbar.open(data, null, {\n                duration: 2000,\n              });\n            }\n          },\n          (error) => {\n            this.showProgressBar = false;\n            this.showLogin();\n            this.__snackbar.open(environment.message.TOKEN_EXPIRED, null, {\n              duration: 2000,\n            });\n          }\n        );\n      }\n    });\n  }\n}\n","<mat-progress-bar\n  mode=\"indeterminate\"\n  [style.display]=\"showProgressBar ? 'block' : 'none'\"\n></mat-progress-bar>\n<div id=\"div-main\">\n  <h2>Danh sách thông số</h2>\n  <div *ngFor=\"let item of __constModels\">\n    <div class=\"item\">\n      <mat-form-field >\n        <mat-label>{{ item.Title }}</mat-label>\n        <input matInput [(ngModel)]=\"item.Value\" (input)=\"onTextChange($event.target.value, item)\" \n        [attr.maxlength]=\"item.Name.toLocaleLowerCase().indexOf('date')>-1? 10: 50\" />\n      </mat-form-field>\n      <div class=\"item-action\">\n        <h1></h1>\n        <button mat-raised-button color=\"primary\" (click)=\"update(item)\">\n          Cập nhật\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n"],"sourceRoot":"webpack:///"}